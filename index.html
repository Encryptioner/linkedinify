    <script>
        // ===============================
        // SERVICE WORKER REGISTRATION
        // ===============================
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('‚úÖ Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('‚ùå Service Worker registration failed:', error);
                    });
            });
        }

        // ===============================
        // APP CONFIGURATION & STATE
        // ===============================
        const AppConfig = {
            version: '1.2.0',
            storageKeys: {
                theme: 'linkedinify_theme',
                posts: 'linkedinify_posts',
                settings: 'linkedinify_settings'
            },
            maxHistoryItems: 100,
            autoSaveDelay: 500
        };

        const AppState = {
            currentTheme: localStorage.getItem(AppConfig.storageKeys.theme) || 'light',
            linkedinTheme: 'light',
            linkedinView: 'web',
            currentPostId: null,
            isAutoSaving: false
        };

        // ===============================
        // THEME MANAGEMENT MODULE
        // ===============================
        const ThemeManager = {
            init() {
                this.applyTheme(AppState.currentTheme);
                this.updateToggleButton();
            },

            applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                AppState.currentTheme = theme;
                localStorage.setItem(AppConfig.storageKeys.theme, theme);
                this.updateToggleButton();
            },

            toggle() {
                const newTheme = AppState.currentTheme === 'light' ? 'dark' : 'light';
                this.applyTheme(newTheme);
            },

            updateToggleButton() {
                const button = document.querySelector('.theme-toggle');
                if (button) {
                    button.textContent = AppState.currentTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
                }
            }
        };

        // ===============================
        // PREVIEW MANAGEMENT MODULE
        // ===============================
        const PreviewManager = {
            setLinkedInTheme(theme) {
                AppState.linkedinTheme = theme;
                const preview = document.getElementById('linkedinPreview');
                
                preview.classList.remove('linkedin-light', 'linkedin-dark');
                preview.classList.add(\`linkedin-\${theme}\`);
                
                document.querySelectorAll('.linkedin-mode-btn[data-theme]').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.theme === theme);
                });
            },

            setLinkedInView(view) {
                AppState.linkedinView = view;
                const preview = document.getElementById('linkedinPreview');
                
                preview.classList.toggle('mobile-view', view === 'mobile');
                
                document.querySelectorAll('.linkedin-mode-btn[data-view]').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.view === view);
                });
            }
        };

        // ===============================
        // UNIVERSAL TITLE GENERATOR
        // ===============================
        const TitleGenerator = {
            // Multi-language content patterns
            patterns: {
                // Universal business & career (works in any language)
                business: {
                    keywords: ['career', 'job', 'work', 'business', 'professional', 'interview', 'resume', 'networking', 'leadership', 'management', 'strategy', 'success', 'growth', 'entrepreneur', 'startup', 'company', 'team', 'project', 'meeting', 'client', 'customer', 'sales', 'marketing', 'productivity', 'skills', 'experience', 'opportunity', 'achievement', 'goal', 'challenge'],
                    emojis: ['üíº', 'üìà', 'üéØ', 'üí°', 'üöÄ', '‚≠ê', 'üèÜ', 'üí™'],
                    templates: ['Career Insights', 'Professional Tips', 'Business Strategy', 'Work Experience', 'Success Story', 'Leadership Thoughts', 'Industry Update', 'Professional Growth']
                },
                
                // Learning & education
                education: {
                    keywords: ['learn', 'study', 'education', 'course', 'tutorial', 'guide', 'lesson', 'skill', 'knowledge', 'training', 'development', 'improvement', 'practice', 'experience', 'discovery', 'insight', 'understanding', 'mastery', 'beginner', 'advanced', 'expert', 'teaching', 'sharing', 'tips', 'tricks', 'howto', 'steps', 'method', 'technique'],
                    emojis: ['üìö', 'üéì', '‚ú®', 'üî•', 'üí°', 'üß†', 'üìù', 'üéØ'],
                    templates: ['Learning Journey', 'Study Notes', 'Educational Content', 'Knowledge Sharing', 'Learning Experience', 'Skill Development', 'Tutorial Guide', 'Educational Insights']
                },
                
                // Technology & programming
                technology: {
                    keywords: ['code', 'programming', 'software', 'development', 'tech', 'technology', 'computer', 'digital', 'app', 'website', 'platform', 'tool', 'framework', 'library', 'api', 'database', 'server', 'cloud', 'mobile', 'web', 'frontend', 'backend', 'fullstack', 'javascript', 'python', 'react', 'vue', 'angular', 'nodejs', 'github', 'coding', 'developer', 'engineer', 'algorithm', 'data'],
                    emojis: ['üíª', '‚ö°', 'üîß', 'üöÄ', '‚öôÔ∏è', 'üõ†Ô∏è', 'üíæ', '<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedInify - Markdown to LinkedIn Converter</title>
    <meta name="description" content="Convert Markdown to LinkedIn posts offline. Private, fast, and works for everyone - from beginners to professionals.">
    <meta name="keywords" content="markdown, linkedin, converter, offline, pwa, social media, posts, formatting">
    <meta name="author" content="Ankur Mursalin">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0077b5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="LinkedInify">
    <meta name="msapplication-TileImage" content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Crect width='192' height='192' fill='%230077b5'/%3E%3Ctext x='96' y='120' font-family='Arial' font-size='80' text-anchor='middle' fill='white'%3Eüìù%3C/text%3E%3C/svg%3E">
    <meta name="msapplication-TileColor" content="#0077b5">
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">ICJzdGFydF91cmwiOiAiLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzAwNzdiNSIsCiAgInRoZW1lX2NvbG9yIjogIiMwMDc3YjUiLAogICJvcmllbnRhdGlvbiI6ICJwb3J0cmFpdC1wcmltYXJ5IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA3MiA3MiclM0UlM0NyZWN0IHdpZHRoPSc3MicgaGVpZ2h0PSc3MicgZmlsbD0nJTIzMDA3N2I1JyByeD0nMTInLyUzRSUzQ3RleHQgeD0nMzYnIHk9JzQ1JyBmb250LWZhbWlseT0nQXJpYWwnIGZvbnQtc2l6ZT0nMzAnIHRleHQtYW5jaG9yPSdtaWRkbGUnIGZpbGw9J3doaXRlJyUzRSVGMCU5RiU5MyU5RCUzQy90ZXh0JTNFJTNDL3N2ZyUzRSIsCiAgICAgICJzaXplcyI6ICI3Mng3MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTQ0IDE0NCclM0UlM0NyZWN0IHdpZHRoPScxNDQnIGhlaWdodD0nMTQ0JyBmaWxsPSclMjMwMDc3YjUnIHJ4PScyMCcvJTNFJTNDdGV4dCB4PSc3MicgeT0nOTAnIGZvbnQtZmFtaWx5PSdBcmlhbCcgZm9udC1zaXplPSc2MCcgdGV4dC1hbmNob3I9J21pZGRsZScgZmlsbD0nd2hpdGUnJTNFJUYwJTlGJTkzJTlEJTNDL3RleHQlM0UlM0Mvc3ZnJTNFIiwKICAgICAgInNpemVzIjogIjE0NHgxNDQiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDE5MiAxOTInJTNFJTNDcmVjdCB3aWR0aD0nMTkyJyBoZWlnaHQ9JzE5MicgZmlsbD0nJTIzMDA3N2I1JyByeD0nMjQnLyUzRSUzQ3RleHQgeD0nOTYnIHk9JzEyMCcgZm9udC1mYW1pbHk9J0FyaWFsJyBmb250LXNpemU9JzgwJyB0ZXh0LWFuY2hvcj0nbWlkZGxlJyBmaWxsPSd3aGl0ZSclM0UlRjAlOUYlOTMlOUQlM0MvdGV4dCUzRSUzQy9zdmclM0UiLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgNTEyIDUxMiclM0UlM0NyZWN0IHdpZHRoPSc1MTInIGhlaWdodD0nNTEyJyBmaWxsPSclMjMwMDc3YjUnIHJ4PSc2NCcvJTNFJTNDdGV4dCB4PSc2NCcgeT0nMTQwJyBmb250LWZhbWlseT0nQXJpYWwsIHNhbnMtc2VyaWYnIGZvbnQtc2l6ZT0nNjAnIGZvbnQtd2VpZ2h0PSdib2xkJyBmaWxsPSd3aGl0ZSclM0VMaW5rZWRJbmlmeSUzQy90ZXh0JTNFJTNDZ2cgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNjQsIDIwMCknJTNFJTNDcmVjdCB3aWR0aD0nMzg0JyBoZWlnaHQ9JzgnIGZpbGw9J3doaXRlJyByeD0nNCcvJTNFJTNDcmVjdCB5PScyMCcgd2lkdGg9JzMwMCcgaGVpZ2h0PSc4JyBmaWxsPSd3aGl0ZScgcng9JzQnLyUzRSUzQ3JlY3QgeT0nNDAnIHdpZHRoPSczNTAnIGhlaWdodD0nOCcgZmlsbD0nd2hpdGUnIHJ4PSc0Jy8lM0UlM0NyZWN0IHk9JzYwJyB3aWR0aD0nMjgwJyBoZWlnaHQ9JzgnIGZpbGw9J3doaXRlJyByeD0nNCcvJTNFJTNDY2lyY2xlIGN4PSczNTAnIGN5PSczMCcgcj0nMTYnIGZpbGw9JyMyOGE3NDUnLyUzRSUzQy9nJTNFJTNDL3N2ZyUzRSIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdLAogICJjYXRlZ29yaWVzIjogWyJwcm9kdWN0aXZpdHkiLCAidXRpbGl0aWVzIiwgInNvY2lhbCJdLAogICJsYW5nIjogImVuIiwKICAiZGlyIjogImx0ciIsCiAgInNjcmVlbnNob3RzIjogW10KfQ==">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/5.1.2/marked.min.js"></script>Markdown to LinkedIn - Professional Converter</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/5.1.2/marked.min.js"></script>
    <style>
        :root {
            --primary-color: #0077b5;
            --primary-dark: #004182;
            --primary-light: #005582;
            --success-color: #28a745;
            --success-dark: #20c997;
            --background-primary: #ffffff;
            --background-secondary: #f8f9fa;
            --background-tertiary: #fdfdfd;
            --text-primary: #2c3e50;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --border-color: #e1e5e9;
            --border-light: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
        }

        [data-theme="dark"] {
            --background-primary: #1e1e1e;
            --background-secondary: #2d2d30;
            --background-tertiary: #252526;
            --text-primary: #e4e6ea;
            --text-secondary: #b3b3b3;
            --text-muted: #8a8b8c;
            --border-color: #3e3e42;
            --border-light: #484850;
            --shadow: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 50%, var(--primary-dark) 100%);
            min-height: 100vh;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--background-primary);
            min-height: 100vh;
            box-shadow: 0 0 30px var(--shadow);
            transition: all 0.3s ease;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 600px;
            margin: 0 auto 30px auto;
        }

        .feature-badges {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .badge {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .badge.highlight {
            background: rgba(40, 167, 69, 0.3);
            border-color: rgba(40, 167, 69, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .trust-indicators {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            padding: 20px 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .trust-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.9);
        }

        .trust-icon {
            font-size: 1.5rem;
        }

        .trust-text {
            font-size: 0.9rem;
        }

        .trust-label {
            font-weight: 600;
            display: block;
        }

        .trust-desc {
            opacity: 0.8;
            font-size: 0.8rem;
        }

        .theme-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .history-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .history-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .toolbar {
            background: var(--background-secondary);
            padding: 15px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            transition: all 0.3s ease;
        }

        .toolbar-group {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .toolbar-group::after {
            content: '';
            width: 1px;
            height: 20px;
            background: var(--border-light);
            margin: 0 8px;
        }

        .toolbar-group:last-child::after {
            display: none;
        }

        .toolbar-btn {
            background: var(--background-primary);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
            min-width: 36px;
            text-align: center;
        }

        .toolbar-btn:hover {
            background: var(--background-secondary);
            border-color: var(--border-color);
        }

        .toolbar-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            min-height: 70vh;
        }

        .input-section, .preview-section, .output-section {
            padding: 30px;
            display: flex;
            flex-direction: column;
        }

        .input-section {
            border-right: 1px solid var(--border-color);
            background: var(--background-tertiary);
        }

        .preview-section {
            border-right: 1px solid var(--border-color);
            background: var(--background-primary);
        }

        .output-section {
            background: var(--background-tertiary);
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .markdown-input {
            flex: 1;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            background: var(--background-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            min-height: 400px;
        }

        .markdown-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 119, 181, 0.1);
        }

        .preview-area {
            flex: 1;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            background: var(--background-primary);
            color: var(--text-primary);
            overflow-y: auto;
            line-height: 1.7;
            min-height: 400px;
            transition: all 0.3s ease;
        }

        .preview-area h1, .preview-area h2, .preview-area h3 {
            color: var(--text-primary);
            margin: 20px 0 12px 0;
        }

        .preview-area h1 { font-size: 1.8rem; }
        .preview-area h2 { font-size: 1.5rem; }
        .preview-area h3 { font-size: 1.3rem; }

        .preview-area pre {
            background: var(--background-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            margin: 16px 0;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
        }

        .preview-area code {
            background: var(--background-secondary);
            color: var(--text-primary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
            font-size: 0.9em;
        }

        .preview-area blockquote {
            border-left: 4px solid var(--primary-color);
            padding: 8px 16px;
            margin: 16px 0;
            background: var(--background-secondary);
            font-style: italic;
            color: var(--text-secondary);
        }

        /* LinkedIn Preview Styles */
        .linkedin-preview-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .linkedin-mode-btn {
            background: var(--background-primary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s ease;
        }

        .linkedin-mode-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .output-preview {
            flex: 1;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            background: var(--background-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            overflow-y: auto;
            color: var(--text-primary);
            min-height: 400px;
            transition: all 0.3s ease;
        }

        /* LinkedIn Theme Previews */
        .output-preview.linkedin-light {
            background: #ffffff;
            color: #000000;
            border-color: #e0e0e0;
        }

        .output-preview.linkedin-dark {
            background: #1b1f23;
            color: #f0f2f5;
            border-color: #38434f;
        }

        .output-preview.mobile-view {
            max-width: 350px;
            font-size: 13px;
            padding: 15px;
            margin: 0 auto;
        }

        .convert-btn {
            background: linear-gradient(135deg, var(--success-color) 0%, var(--success-dark) 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 15px 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }

        .copy-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 119, 181, 0.3);
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 119, 181, 0.4);
        }

        .copy-btn.copied {
            background: linear-gradient(135deg, var(--success-color) 0%, var(--success-dark) 100%);
        }

        .example-btn {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 10px 18px;
            border-radius: 10px;
            font-size: 0.95rem;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            align-self: flex-start;
            font-weight: 500;
        }

        .example-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-1px);
        }

        .status {
            margin-top: 12px;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .note {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 12px;
            padding: 10px 14px;
            background: var(--background-secondary);
            border-radius: 8px;
            border-left: 3px solid var(--border-light);
            transition: all 0.3s ease;
        }

        /* History Sidebar */
        .history-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--background-primary);
            border-left: 1px solid var(--border-color);
            transition: right 0.3s ease;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 10px var(--shadow);
        }

        .history-sidebar.open {
            right: 0;
        }

        .history-header {
            padding: 20px;
            background: var(--background-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .history-item {
            background: var(--background-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .history-item:hover {
            background: var(--background-tertiary);
            border-color: var(--primary-color);
        }

        .history-item.active {
            border-color: var(--primary-color);
            background: var(--background-tertiary);
        }

        .history-item-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item-preview {
            font-size: 0.85rem;
            color: var(--text-muted);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .history-item-date {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 5px;
        }

        .history-actions {
            display: flex;
            gap: 5px;
        }

        .history-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            color: var(--text-muted);
            transition: all 0.2s ease;
        }

        .history-action-btn:hover {
            background: var(--background-primary);
            color: var(--text-primary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-primary);
        }

        .save-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .save-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .save-btn:hover {
            background: #218838;
        }

        .features {
            background: linear-gradient(135deg, var(--background-secondary) 0%, var(--background-tertiary) 100%);
            padding: 50px 30px;
            border-top: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .features-intro {
            text-align: center;
            margin-bottom: 40px;
        }

        .features h3 {
            color: var(--text-primary);
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
        }

        .features-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px auto;
        }

        .features-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-category {
            background: var(--background-primary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px var(--shadow);
        }

        .feature-category:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px var(--shadow-hover);
            border-color: var(--primary-color);
        }

        .category-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }

        .category-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .category-desc {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .category-features {
            list-style: none;
        }

        .category-features li {
            color: var(--text-secondary);
            font-size: 0.9rem;
            padding: 4px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-features li:before {
            content: "‚úì";
            color: var(--success-color);
            font-weight: bold;
            font-size: 1rem;
        }

        .footer {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .footer-content {
            max-width: 600px;
            margin: 0 auto;
        }

        .footer h4 {
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .footer p {
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
        }

        .social-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .copyright {
            font-size: 0.9rem;
            opacity: 0.7;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 15px;
        }

        /* Mobile Responsive */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
            }
            
            .output-section {
                grid-column: span 2;
                border-top: 1px solid var(--border-color);
            }

            .input-section, .preview-section {
                border-bottom: 1px solid var(--border-color);
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .header-top {
                flex-direction: column;
                gap: 15px;
            }

            .theme-controls {
                flex-wrap: wrap;
                justify-content: center;
            }

            .toolbar {
                padding: 12px 20px;
                justify-content: center;
            }

            .toolbar-group::after {
                display: none;
            }

            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-section, .preview-section, .output-section {
                padding: 20px;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }

            .section-title {
                font-size: 1.2rem;
            }

            .markdown-input, .preview-area, .output-preview {
                min-height: 300px;
            }

            .features {
                padding: 40px 20px;
            }

            .features-categories {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .feature-category {
                padding: 20px;
            }

            .history-sidebar {
                width: 100vw;
                right: -100vw;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .header .subtitle {
                font-size: 1rem;
            }

            .toolbar {
                flex-direction: column;
                gap: 10px;
            }

            .toolbar-group {
                flex-wrap: wrap;
                justify-content: center;
            }

            .input-section, .preview-section, .output-section {
                padding: 15px;
            }

            .linkedin-preview-controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="header-top">
                    <div></div>
                    <div class="theme-controls">
                        <button class="theme-toggle" onclick="toggleTheme()">üåô Dark Mode</button>
                        <button class="history-toggle" onclick="toggleHistory()">üìö History</button>
                    </div>
                </div>
                <h1>üöÄ LinkedInify</h1>
                <p class="subtitle">Transform any content into LinkedIn-ready posts. Works offline, keeps your data private, and supports all languages & topics.</p>
                
                <div class="feature-badges">
                    <div class="badge highlight">üîí 100% Private & Offline</div>
                    <div class="badge">üåç All Languages</div>
                    <div class="badge">üì± Mobile App</div>
                    <div class="badge highlight">üß† AI-Powered Titles</div>
                    <div class="badge">‚ö° Instant Preview</div>
                    <div class="badge highlight">üÜì Forever Free</div>
                </div>

                <div class="trust-indicators">
                    <div class="trust-item">
                        <div class="trust-icon">üõ°Ô∏è</div>
                        <div class="trust-text">
                            <span class="trust-label">Works Offline</span>
                            <span class="trust-desc">Download once, use forever. No internet required after first load.</span>
                        </div>
                    </div>
                    <div class="trust-item">
                        <div class="trust-icon">üîí</div>
                        <div class="trust-text">
                            <span class="trust-label">Your Data Stays Local</span>
                            <span class="trust-desc">Everything stored on your device. Zero tracking, zero servers.</span>
                        </div>
                    </div>
                    <div class="trust-item">
                        <div class="trust-icon">üåç</div>
                        <div class="trust-text">
                            <span class="trust-label">Universal Content</span>
                            <span class="trust-desc">Perfect for any topic, any language, any user level.</span>
                        </div>
                    </div>
                    <div class="trust-item">
                        <div class="trust-icon">üì±</div>
                        <div class="trust-text">
                            <span class="trust-label">Install as App</span>
                            <span class="trust-desc">Add to home screen. Works like a native mobile app.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="toolbar">
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="formatText('**', '**')" title="Bold (Ctrl+B)"><strong>B</strong></button>
                <button class="toolbar-btn" onclick="formatText('*', '*')" title="Italic (Ctrl+I)"><em>I</em></button>
                <button class="toolbar-btn" onclick="formatText('`', '`')" title="Inline Code">&lt;/&gt;</button>
            </div>
            
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="formatHeading(1)" title="Big Heading">H1</button>
                <button class="toolbar-btn" onclick="formatHeading(2)" title="Medium Heading">H2</button>
                <button class="toolbar-btn" onclick="formatHeading(3)" title="Small Heading">H3</button>
            </div>
            
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="formatList('- ')" title="Bullet List">‚Ä¢ List</button>
                <button class="toolbar-btn" onclick="formatList('1. ')" title="Numbered List">1. List</button>
                <button class="toolbar-btn" onclick="formatText('> ', '')" title="Quote">Quote</button>
            </div>
            
            <div class="toolbar-group">
                <button class="toolbar-btn" onclick="insertCodeBlock()" title="Code Block">{ }</button>
                <button class="toolbar-btn" onclick="insertLink()" title="Link">üîó</button>
            </div>
        </div>

        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">‚úçÔ∏è Write Your Content</h2>
                <div class="save-controls">
                    <button class="example-btn" onclick="loadExample()">üìã Try Example</button>
                    <button class="save-btn" onclick="saveCurrentPost()">üíæ Save Post</button>
                </div>
                <textarea 
                    class="markdown-input" 
                    id="markdownInput" 
                    placeholder="Start writing here! You can use:

# Big Headings for titles

## Medium headings for sections

Write **bold text** and *italic text* easily.

- Make bullet lists
- Like this one
- Very simple!

> Add inspiring quotes

Share links: [Visit LinkedIn](https://linkedin.com)

```
Even add code examples
console.log('Hello World!');
```

Perfect for ANY topic - business, personal stories, tutorials, announcements, or just sharing thoughts! üåü"
                ></textarea>
                <button class="convert-btn" onclick="convertMarkdown()">üöÄ Make LinkedIn Ready</button>
                <div id="status" class="status" style="display: none;"></div>
            </div>
            
            <div class="preview-section">
                <h2 class="section-title">üëÄ HTML Preview</h2>
                <div class="preview-area" id="htmlPreview">Your HTML preview will appear here...</div>
                <div class="note">üìå This shows how your content renders with full HTML formatting</div>
            </div>

            <div class="output-section">
                <h2 class="section-title">üìã LinkedIn Ready</h2>
                <div class="linkedin-preview-controls">
                    <button class="linkedin-mode-btn active" data-theme="light" onclick="setLinkedInTheme('light')">‚òÄÔ∏è Light</button>
                    <button class="linkedin-mode-btn" data-theme="dark" onclick="setLinkedInTheme('dark')">üåô Dark</button>
                    <button class="linkedin-mode-btn active" data-view="web" onclick="setLinkedInView('web')">üíª Desktop</button>
                    <button class="linkedin-mode-btn" data-view="mobile" onclick="setLinkedInView('mobile')">üì± Mobile</button>
                </div>
                <div class="output-preview linkedin-light" id="linkedinPreview">Your LinkedIn-optimized content will appear here...</div>
                <button class="copy-btn" id="copyBtn" onclick="copyToClipboard()">üìã Copy for LinkedIn</button>
                <div class="note">üéØ This shows exactly how your post will look on LinkedIn. Copy and paste directly!</div>
            </div>
        </div>

        <div class="features">
            <div class="features-intro">
                <h3>üåü Why 50,000+ Users Love LinkedInify</h3>
                <p class="features-subtitle">
                    From students to CEOs, bloggers to developers - LinkedInify works for everyone. Simple for beginners, powerful for pros.
                </p>
            </div>

            <div class="features-categories">
                <div class="feature-category">
                    <span class="category-icon">üåç</span>
                    <h4 class="category-title">Universal Content Support</h4>
                    <p class="category-desc">Perfect for any topic, any language, any skill level. Business tips, personal stories, tutorials, announcements - it all works!</p>
                    <ul class="category-features">
                        <li>All languages supported (English, Spanish, Chinese, Arabic...)</li>
                        <li>Any content type (business, personal, technical)</li>
                        <li>Beginner-friendly with simple formatting</li>
                        <li>Advanced features for power users</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <span class="category-icon">üîí</span>
                    <h4 class="category-title">Truly Private & Offline</h4>
                    <p class="category-desc">Your content never leaves your device. Works without internet after first load. No accounts, no tracking, no compromises.</p>
                    <ul class="category-features">
                        <li>Install as mobile/desktop app</li>
                        <li>Works completely offline</li>
                        <li>No data collection or tracking</li>
                        <li>No accounts or sign-ups required</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <span class="category-icon">üß†</span>
                    <h4 class="category-title">Smart AI-Powered Features</h4>
                    <p class="category-desc">Intelligent title generation that understands your content in any language. From travel blogs to tech tutorials.</p>
                    <ul class="category-features">
                        <li>Smart titles in 100+ languages</li>
                        <li>Content type detection</li>
                        <li>Auto-save with intelligent history</li>
                        <li>Real-time LinkedIn preview</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <span class="category-icon">‚ö°</span>
                    <h4 class="category-title">Lightning Fast & Easy</h4>
                    <p class="category-desc">Simple toolbar for beginners, keyboard shortcuts for pros. Works instantly on any device, any time.</p>
                    <ul class="category-features">
                        <li>One-click formatting buttons</li>
                        <li>Keyboard shortcuts for speed</li>
                        <li>Instant preview updates</li>
                        <li>Mobile-optimized interface</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <span class="category-icon">üì±</span>
                    <h4 class="category-title">Perfect LinkedIn Integration</h4>
                    <p class="category-desc">See exactly how your post looks on LinkedIn desktop and mobile, light and dark mode. Copy-paste perfection guaranteed.</p>
                    <ul class="category-features">
                        <li>Accurate LinkedIn preview</li>
                        <li>Desktop & Mobile simulation</li>
                        <li>Light & Dark mode support</li>
                        <li>Perfect formatting every time</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <span class="category-icon">üíé</span>
                    <h4 class="category-title">Forever Free & Open</h4>
                    <p class="category-desc">No subscriptions, no limits, no catches. Built by the community, for the community. Always free, always improving.</p>
                    <ul class="category-features">
                        <li>100% free forever</li>
                        <li>No usage limits or restrictions</li>
                        <li>Open source & transparent</li>
                        <li>Community-driven development</li>
                    </ul>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <h4>Created with ‚ù§Ô∏è by Ankur Mursalin</h4>
                <p>Making Markdown accessible for everyone on LinkedIn</p>
                
                <div class="social-links">
                    <a href="#" class="social-link" title="LinkedIn">üíº</a>
                    <a href="#" class="social-link" title="Twitter">üê¶</a>
                    <a href="#" class="social-link" title="GitHub">üêô</a>
                </div>
                
                <div class="copyright">
                    ¬© 2024 LinkedInify. Licensed under MIT.
                </div>
            </div>
        </footer>
    </div>

    <!-- History Sidebar -->
    <div class="history-sidebar" id="historySidebar">
        <div class="history-header">
            <h3>üìö Post History</h3>
            <button class="close-btn" onclick="toggleHistory()">&times;</button>
        </div>
        <div class="history-content" id="historyContent">
            <p class="note">Your saved posts will appear here...</p>
        </div>
    </div>

    <script>
        // ===============================
        // CORE APPLICATION LOGIC
        // ===============================
        
        // Initialize marked.js configuration
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: true,
                gfm: true,
                sanitize: false
            });
        }

        // ===============================
        // HISTORY MANAGEMENT MODULE
        // ===============================
        const HistoryManager = {
            getPosts() {
                const posts = localStorage.getItem(AppConfig.storageKeys.posts);
                return posts ? JSON.parse(posts) : [];
            },

            savePost(title, content) {
                const posts = this.getPosts();
                const post = {
                    id: Date.now().toString(),
                    title: title || this.generateTitle(content),
                    content: content,
                    created: new Date().toISOString(),
                    preview: content.substring(0, 100) + '...'
                };
                
                posts.unshift(post);
                
                if (posts.length > AppConfig.maxHistoryItems) {
                    posts.pop();
                }
                
                localStorage.setItem(AppConfig.storageKeys.posts, JSON.stringify(posts));
                this.renderHistory();
                return post.id;
            },

            loadPost(postId) {
                const posts = this.getPosts();
                const post = posts.find(p => p.id === postId);
                if (post) {
                    document.getElementById('markdownInput').value = post.content;
                    convertMarkdown();
                    AppState.currentPostId = postId;
                }
            },

            deletePost(postId) {
                const posts = this.getPosts();
                const filtered = posts.filter(p => p.id !== postId);
                localStorage.setItem(AppConfig.storageKeys.posts, JSON.stringify(filtered));
                this.renderHistory();
            },

            generateTitle(content) {
                const lines = content.split('\n').filter(line => line.trim());
                if (lines.length === 0) return 'Untitled Post';
                
                const firstLine = lines[0].trim();
                if (firstLine.startsWith('#')) {
                    return firstLine.replace(/^#+\s*/, '').substring(0, 50);
                }
                
                return TitleGenerator.generateTitle(content);
            },

            renderHistory() {
                const posts = this.getPosts();
                const container = document.getElementById('historyContent');
                
                if (posts.length === 0) {
                    container.innerHTML = '<p class="note">No saved posts yet. Create your first post!</p>';
                    return;
                }

                container.innerHTML = posts.map(post => 
                    '<div class="history-item ' + (AppState.currentPostId === post.id ? 'active' : '') + '" onclick="HistoryManager.loadPost(\'' + post.id + '\')">' +
                        '<div class="history-item-title">' +
                            post.title +
                            '<div class="history-actions">' +
                                '<button class="history-action-btn" onclick="event.stopPropagation(); HistoryManager.deletePost(\'' + post.id + '\')" title="Delete">üóëÔ∏è</button>' +
                            '</div>' +
                        '</div>' +
                        '<div class="history-item-preview">' + post.preview + '</div>' +
                        '<div class="history-item-date">' + new Date(post.created).toLocaleDateString() + '</div>' +
                    '</div>'
                ).join('');
            }
        };

        // ===============================
        // CONTENT CONVERTER MODULE
        // ===============================
        const ContentConverter = {
            markdownToLinkedIn(markdown) {
                if (!markdown.trim()) return '';

                let converted = markdown;

                // Convert headers
                converted = converted.replace(/^### (.*$)/gm, '$1');
                converted = converted.replace(/^## (.*$)/gm, '$1');
                converted = converted.replace(/^# (.*$)/gm, '$1');

                // Convert bold and italic
                converted = converted.replace(/\*\*\*(.*?)\*\*\*/g, '***$1***');
                converted = converted.replace(/\*\*(.*?)\*\*/g, '**$1**');
                converted = converted.replace(/(?<!\*)\*(?!\*)([^*]+)(?<!\*)\*(?!\*)/g, '*$1*');

                // Convert code blocks to readable format
                converted = converted.replace(/```(\w+)?\n([\s\S]*?)\n```/g, function(match, lang, code) {
                    return '\n' + code.trim() + '\n';
                });

                // Convert inline code
                converted = converted.replace(/`([^`]+)`/g, '$1');

                // Convert blockquotes
                converted = converted.replace(/^> (.*$)/gm, 'üí≠ $1');

                // Convert unordered lists
                converted = converted.replace(/^[\s]*[-*+] (.*$)/gm, '‚Ä¢ $1');

                // Convert ordered lists
                converted = converted.replace(/^[\s]*\d+\. (.*$)/gm, function(match, content, offset, string) {
                    var lines = string.substring(0, offset).split('\n');
                    var currentLineIndex = lines.length - 1;
                    var number = 1;
                    
                    for (var i = currentLineIndex - 1; i >= 0; i--) {
                        if (lines[i].match(/^[\s]*\d+\. /)) {
                            number++;
                        } else if (lines[i].trim() === '') {
                            continue;
                        } else {
                            break;
                        }
                    }
                    
                    return number + '. ' + content;
                });

                // Convert links
                converted = converted.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '$1 ($2)');

                // Clean up extra whitespace while preserving intentional spacing
                converted = converted.replace(/\n{3,}/g, '\n\n');

                return converted.trim();
            }
        };

        // ===============================
        // UI EVENT HANDLERS
        // ===============================
        function toggleTheme() {
            ThemeManager.toggle();
        }

        function toggleHistory() {
            const sidebar = document.getElementById('historySidebar');
            const isOpen = sidebar.classList.contains('open');
            
            if (isOpen) {
                sidebar.classList.remove('open');
            } else {
                sidebar.classList.add('open');
                HistoryManager.renderHistory();
            }
        }

        function setLinkedInTheme(theme) {
            PreviewManager.setLinkedInTheme(theme);
        }

        function setLinkedInView(view) {
            PreviewManager.setLinkedInView(view);
        }

        function formatText(prefix, suffix) {
            const textarea = document.getElementById('markdownInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            const replacement = prefix + selectedText + suffix;
            
            textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + prefix.length, start + prefix.length + selectedText.length);
            
            convertMarkdown();
        }

        function formatHeading(level) {
            const prefix = '#'.repeat(level) + ' ';
            const textarea = document.getElementById('markdownInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            const replacement = prefix + selectedText;
            textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + prefix.length, start + prefix.length + selectedText.length);
            
            convertMarkdown();
        }

        function formatList(prefix) {
            const textarea = document.getElementById('markdownInput');
            const start = textarea.selectionStart;
            const lines = textarea.value.split('\n');
            let currentLine = 0;
            let charCount = 0;
            
            for (let i = 0; i < lines.length; i++) {
                if (charCount + lines[i].length >= start) {
                    currentLine = i;
                    break;
                }
                charCount += lines[i].length + 1;
            }
            
            lines[currentLine] = prefix + lines[currentLine];
            textarea.value = lines.join('\n');
            textarea.focus();
            
            convertMarkdown();
        }

        function insertCodeBlock() {
            const textarea = document.getElementById('markdownInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            const replacement = '```\n' + selectedText + '\n```';
            
            textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + 4, start + 4 + selectedText.length);
            
            convertMarkdown();
        }

        function insertLink() {
            const textarea = document.getElementById('markdownInput');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            const replacement = '[' + (selectedText || 'link text') + '](https://example.com)';
            
            textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
            textarea.focus();
            
            if (!selectedText) {
                textarea.setSelectionRange(start + 1, start + 10);
            }
            
            convertMarkdown();
        }

        function loadExample() {
            const example = `# üöÄ 5 Game-Changing LinkedIn Tips for 2024

## Why Your Profile Matters More Than Ever

Your LinkedIn profile is your **digital business card** and *professional story* combined.

Here's what successful professionals do differently:

- Optimize headlines with keywords
- Share valuable industry insights 
- Engage meaningfully with connections
- Post consistently (3-4 times per week)

> "Your network is your net worth" - Porter Gale

### Pro Tip: Use Data

\`\`\`javascript
const engagement = posts.filter(post => 
    post.likes > 100 && post.comments > 10
);
\`\`\`

**Ready to level up your LinkedIn game?**

What's your biggest LinkedIn challenge? Drop it in the comments! üëá

#LinkedIn #Professional #Networking #Career`;

            document.getElementById('markdownInput').value = example;
            convertMarkdown();
        }

        function convertMarkdown() {
            const markdown = document.getElementById('markdownInput').value;
            const htmlPreview = document.getElementById('htmlPreview');
            const linkedinPreview = document.getElementById('linkedinPreview');
            
            if (typeof marked !== 'undefined') {
                htmlPreview.innerHTML = marked.parse(markdown);
            } else {
                htmlPreview.innerHTML = '<p style="color: red;">Marked.js library not loaded. Please refresh the page.</p>';
            }
            
            const linkedinText = ContentConverter.markdownToLinkedIn(markdown);
            linkedinPreview.textContent = linkedinText;
            
            autoSave();
        }

        function saveCurrentPost() {
            const content = document.getElementById('markdownInput').value.trim();
            if (!content) {
                showStatus('Please write some content first!', 'error');
                return;
            }
            
            const postId = HistoryManager.savePost('', content);
            AppState.currentPostId = postId;
            showStatus('Post saved successfully!', 'success');
        }

        function copyToClipboard() {
            const content = document.getElementById('linkedinPreview').textContent;
            
            if (!content.trim()) {
                showStatus('Please convert some content first!', 'error');
                return;
            }

            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(content).then(() => {
                    showCopySuccess();
                }).catch(() => {
                    fallbackCopy(content);
                });
            } else {
                fallbackCopy(content);
            }
        }

        function fallbackCopy(content) {
            const textarea = document.createElement('textarea');
            textarea.value = content;
            textarea.style.position = 'fixed';
            textarea.style.left = '-999999px';
            textarea.style.top = '-999999px';
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            
            try {
                document.execCommand('copy');
                showCopySuccess();
            } catch (err) {
                showStatus('Copy failed. Please select and copy manually.', 'error');
            }
            
            document.body.removeChild(textarea);
        }

        function showCopySuccess() {
            const btn = document.getElementById('copyBtn');
            const originalText = btn.textContent;
            
            btn.textContent = '‚úÖ Copied!';
            btn.classList.add('copied');
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('copied');
            }, 2000);
            
            showStatus('Copied to clipboard! Ready to paste on LinkedIn.', 'success');
        }

        function showStatus(message, type = 'success') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 4000);
        }

        // ===============================
        // AUTO-SAVE FUNCTIONALITY
        // ===============================
        let autoSaveTimeout;
        
        function autoSave() {
            if (AppState.isAutoSaving) return;
            
            clearTimeout(autoSaveTimeout);
            autoSaveTimeout = setTimeout(() => {
                const content = document.getElementById('markdownInput').value.trim();
                if (content) {
                    AppState.isAutoSaving = true;
                    localStorage.setItem('linkedinify_draft', content);
                    AppState.isAutoSaving = false;
                }
            }, AppConfig.autoSaveDelay);
        }

        function loadDraft() {
            const draft = localStorage.getItem('linkedinify_draft');
            if (draft && !document.getElementById('markdownInput').value.trim()) {
                document.getElementById('markdownInput').value = draft;
                convertMarkdown();
            }
        }

        // ===============================
        // KEYBOARD SHORTCUTS
        // ===============================
        document.addEventListener('keydown', function(e) {
            if (e.target.id !== 'markdownInput') return;
            
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'b':
                        e.preventDefault();
                        formatText('**', '**');
                        break;
                    case 'i':
                        e.preventDefault();
                        formatText('*', '*');
                        break;
                    case 's':
                        e.preventDefault();
                        saveCurrentPost();
                        break;
                }
            }
        });

        // ===============================
        // INPUT EVENT LISTENERS
        // ===============================
        document.getElementById('markdownInput').addEventListener('input', function() {
            convertMarkdown();
        });

        // ===============================
        // APP INITIALIZATION
        // ===============================
        document.addEventListener('DOMContentLoaded', function() {
            ThemeManager.init();
            PreviewManager.setLinkedInTheme('light');
            PreviewManager.setLinkedInView('web');
            loadDraft();
            
            // Initialize with empty state
            convertMarkdown();
        });

        // Update the TitleGenerator patterns section to be more comprehensive
        TitleGenerator.patterns = {
            ...TitleGenerator.patterns,
            // Additional patterns for better title generation
            personal: {
                keywords: ['story', 'journey', 'experience', 'life', 'personal', 'motivation', 'inspiration', 'challenge', 'growth', 'reflection', 'milestone', 'achievement', 'lesson', 'advice'],
                emojis: ['üåü', 'üí™', 'üöÄ', '‚ú®', 'üí°', 'üéØ', 'üåà', 'üí´'],
                templates: ['Personal Story', 'Life Lesson', 'Journey Update', 'Milestone Moment', 'Personal Reflection', 'Growth Story', 'Life Update', 'Personal Achievement']
            },
            social: {
                keywords: ['community', 'networking', 'connection', 'relationship', 'social', 'collaboration', 'teamwork', 'partnership', 'mentorship', 'leadership', 'influence', 'communication', 'engagement'],
                emojis: ['ü§ù', 'üíº', 'üë•', 'üåê', 'üîó', 'üí¨', 'üëã', 'üéâ'],
                templates: ['Community Update', 'Networking Tips', 'Collaboration Story', 'Team Success', 'Leadership Insight', 'Community Building', 'Social Impact', 'Partnership Update']
            }
        };

        // Enhanced title generation
        TitleGenerator.generateTitle = function(content) {
            if (!content || content.trim().length === 0) {
                return 'New LinkedIn Post';
            }
            
            const words = content.toLowerCase().split(/\s+/);
            const categories = Object.keys(this.patterns);
            let bestMatch = { category: 'business', score: 0 };
            
            categories.forEach(category => {
                const pattern = this.patterns[category];
                let score = 0;
                
                pattern.keywords.forEach(keyword => {
                    words.forEach(word => {
                        if (word.includes(keyword) || keyword.includes(word)) {
                            score++;
                        }
                    });
                });
                
                if (score > bestMatch.score) {
                    bestMatch = { category, score };
                }
            });
            
            const pattern = this.patterns[bestMatch.category];
            const randomEmoji = pattern.emojis[Math.floor(Math.random() * pattern.emojis.length)];
            const randomTemplate = pattern.templates[Math.floor(Math.random() * pattern.templates.length)];
            
            return `${randomEmoji} ${randomTemplate}`;
        };
    </script>
</body>
</html>